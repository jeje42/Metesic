<player *ngIf="user"></player>

<div *ngIf="user" class="research-container">
  <div class="research-criterions">
    <mat-card class="research-card">
      <mat-card-title>
        {{ 'Research' | translate }}
      </mat-card-title>
      <mat-card-content>
        <h3>{{ 'Name' | translate }}</h3>
        <form>
          <mat-form-field>
            <input matInput dividerColor="accent" type="text" #searchtext placeholder="Enter a video name"></input>
          </mat-form-field>
          <button color="accent" mat-raised-button (click)="search(searchtext.value)" matTooltip="{{ 'Search' | translate }}">
            <mat-icon>find_in_page</mat-icon>
          </button>
        </form>
        <h3>{{ 'Categories' | translate }}</h3>
          <div class="slide-toggle-categories">
            <mat-slide-toggle name="slideToggle" *ngFor="let category of categories | async" (change)="changeCategory(category)">
              {{category.name}}
            </mat-slide-toggle>
          </div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-title *ngIf="!isSearch">
        {{ 'Some Movies' | translate }}
      </mat-card-title>
      <mat-card-title *ngIf="isSearch">
        {{ 'Results' | translate }}
      </mat-card-title>
      <mat-card-content>
      <div *ngFor="let videoMeta of videosMetas | async | paginate: { itemsPerPage: 10, currentPage: p, totalItems: nbVideosMeta }" class="video-meta">
        <!-- <div class="menu-section">
          <mat-toolbar class="action-on-result">
            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Open basic menu">
              <mat-icon>more_vert</mat-icon>
            </button>
          </mat-toolbar>

          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="addToCurrentPlayList(videoMeta)">
      	    	{{ 'Add to current playlist' | translate }}
      	    </button>
            <button mat-menu-item (click)="openEditPlayLists(videoMeta)">
      	    	{{ 'Add to another playlist ...' | translate }}
      	    </button>
            <button mat-menu-item (click)="deleteVideo(videoMeta)" disabled="isVideoInCurrentPlayList(videoMeta)">
      	       {{ 'Delete from playlist' | translate }}
      	    </button>
          </mat-menu>
        </div> -->
        <div class="demo-button">
          <section>
            <button mat-raised-button color="accent" matTooltip="{{ 'Add to current playlist' | translate }}" (click)="addToCurrentPlayList(videoMeta)">
              <mat-icon class="mat-24">playlist_add</mat-icon>
            </button>
            <button mat-raised-button color="accent" matTooltip="{{ 'Add to another playlist ...' | translate }}" (click)="openEditPlayLists(videoMeta)">
              <mat-icon class="mat-24">queue</mat-icon>
            </button>
          </section>
        </div>
        <div class="text">
          <h2 class="video-name">
            {{videoMeta.name}}
          </h2>
          <p>
              {{videoMeta.description}}
          </p>
        </div>
      </div>
    </mat-card-content>
      <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </mat-card>
  </div>
</div>

<div *ngIf="!user">
  <h2>{{ 'Please login or signup to get all fonctionalities from Metesic !' | translate }}</h2>
</div>
